{% extends 'base.html' %}

{% block page_title %}
   Produtos
{% endblock %}

{% block content_title %}
   Produtos
{% endblock %}

{% block modal_title %}
   Adicionar Produto
{% endblock %}

{% block modal_body %}
   <form class="modal_form" method="post" action="{% url 'product:create' %}">
      {% csrf_token %}

      <div class="add_area">
         <span>Cód. Barras</span>

         <input type="text" name="bar_code">

         {% for error in form.bar_code.errors %}
            <div class="field_error">{{ error }}</div>
         {% endfor %}
      </div>

      <div class="add_area2">
         <div class="add_area">
            <span>Categoria</span>

            <input type="text" name="category">

            {% for error in form.category.errors %}
               <div class="field_error">{{ error }}</div>
            {% endfor %}
         </div>

         <div class="add_area">
            <span>Marca</span>

            <input type="text" name="brand">

            {% for error in form.brand.errors %}
               <div class="field_error">{{ error }}</div>
            {% endfor %}
         </div>
      </div>

      <div class="add_area">
         <span>Modelo</span>

         <input type="text" name="model">

         {% for error in form.model.errors %}
            <div class="field_error">{{ error }}</div>
         {% endfor %}
      </div>

      <div class="add_area2">
         <div class="select_body">
            <span>Tipo de unidade</span>
   
            <select name="unit_type">
               <option value="unidade" selected>Un.</option>
               <option value="quilo">Kg.</option>
               <option value="peça">Pç.</option>
            </select>

            {% for error in form.unit_type.errors %}
               <div class="field_error">{{ error }}</div>
            {% endfor %}
         </div>

         <div class="select_body">
            <span>Formato</span>
   
            <select name="format_type">
               <option value="simples" selected>Simples</option>
               <option value="com_variacao">Com variação</option>
            </select>

            {% for error in form.format_type.errors %}
               <div class="field_error">{{ error }}</div>
            {% endfor %}
         </div>
      </div>

      <div class="add_area2">  
         <div class="add_area">
            <span>Preço</span>
   
            <input type="number" name="price" min="1">

            {% for error in form.price.errors %}
               <div class="field_error">{{ error }}</div>
            {% endfor %}
         </div>

         <div class="add_area">
            <span>Quantidade</span>
   
            <input type="text" name="stock">

            {% for error in form.stock.errors %}
               <div class="field_error">{{ error }}</div>
            {% endfor %}
         </div>
      </div>

      <div class="btn_area">
         <button class="close_btn" type="button">
            <span>CANCELAR</span>
         </button>

         <button class="save_btn" type="submit">
            <span>SALVAR</span>
         </button>
      </div>
   </form>
{% endblock %}

{% block search %}
   <div class="search_area">
      <form class="form_search" method="get">
         {% csrf_token %}

         <select class="filter_menu" name="filter">
            <option value="full_name" selected>Descrição</option>
            <option value="bar_code">Cód. Barras</option>
         </select>

         <div class="search_group">
            <input type="text" name="search" placeholder="Pesquisar..." value="{{ request.GET.search }}">
            
            <button type="submit">
               <span class="search_icon material-icons-sharp">search</span>
            </button>
         </div>
      </form>

      <div class="btn_area">
         <button class="add_btn">
            <span class="add_icon material-icons-sharp">add</span>
         </button>
         
         <a class="report_btn" href="{% url 'product:product_list_export' %}">
            <span class="report_icon material-icons-sharp">file_download</span>
         </a>
   </div>
</div>
{% endblock %}

{% block content_body %}
   <div class="table_area">
      <table>
         <thead>
            <tr>
               <th>DESCRIÇÃO</th>
               <th>CÓD. BARRAS</th>
               <th>TIPO</th>
               <th>PREÇO</th>
               <th>ESTOQUE</th>
               <th>STATUS</th>
               <th></th>
            </tr>
         </thead>
         <tbody>
            {% for product in products %}
               <tr>
                  <th>{{ product }}</th>
                  <th>{{ product.bar_code }}</th>
                  <th>{{ product.get_format_type_display }}</th>
                  <th>R$ {{ product.price }}</th>
                  <th>{{ product.stock }}</th>
                  <th>
                  {% if product.is_active %}
                     <p class="status active">Ativo</p>
                  {% else %}
                     <p class="status inactive">Inativo</p>
                  {% endif %}
                  </th>
                  <th class="th_icon_area">
                     <a class="th_icon_area_link" href="#">
                        <span class="th_icon material-icons-sharp">edit</span>
                     </a>
                  </th>
               </tr>
            {% empty %}
               <tr>
                  <th>
                     <p>Nenhum produto encontrado</p>
                  </th>
               </tr>
            {% endfor %}
         </tbody>
      </table>
   </div>
{% endblock %}