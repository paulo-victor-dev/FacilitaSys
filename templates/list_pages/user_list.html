{% extends 'base.html' %}

{% load filters %}

{% block page_title %}
   Usuários
{% endblock %}

{% block content_title %}
   Usuários
{% endblock %}

{% block messages %}
   {% if messages %}
      {% for message in messages %}
         <div class="message_area">
            <span>{{ message }}</span>
         </div>
      {% endfor %}
   {% endif %}
{% endblock %}


{% block search %}
   <form method="get" id="form_search">
      {% csrf_token %}

      <div class="search_group">
         <div class="search_input_area">
            <input type="text" name="search" id="input_search" placeholder="Pesquisar..." value="{{ request.GET.search }}">
         </div>
         
         <button type="submit" id="search_btn">
            <span class="search_icon material-icons-sharp">search</span>
         </button>
      </div>
   </form>

   <div class="btn_area">
      <a href="{% url 'account:user_create' %}">
         <span class="btn_area_icon material-icons-sharp">add</span>
         
         <span class="text">Cadastrar</span>
      </a>
      
      <a href="{% url 'account:user_list_export' %}">
         <span class="btn_area_icon material-icons-sharp">file_download</span>

         <span class="text">Exportar</span>
      </a>
   </div>
{% endblock %}

{% block content %}
   <table>
      <thead>
         <tr>
            <th>NOME</th>
            <th>EMAIL</th>
            <th>DOCUMENTO</th>
            <th>TIPO DE USUÁRIO</th>
            <th>STATUS</th>
            <th></th>
         </tr>
      </thead>
      <tbody>
         {% for user in users %}
            <tr>
               <th>{{ user.get_full_name }}</th>
               <th>{{ user.email }}</th>
               <th>
                  {% if user.document %}
                     {{ user.document|cpf_cnpj_mask }}
                  {% else %}
                     -
                  {% endif %}
               </th>
               <th>{{ user.get_user_type_display }}</th>
               <th>
               {% if user.is_active %}
                  <p class="status active">Ativo</p>
               {% else %}
                  <p class="status inactive">Inativo</p>
               {% endif %}
               </th>
               <th class="th_icon_area">
                  <a class="th_icon_area_link" href="{% url 'account:user_update' user.pk %}">
                     <span class="th_icon material-icons-sharp">edit</span>
                  </a>
               </th>
            </tr>
         {% empty %}
            <tr>
               <th>
                  <p>Nenhum usuário encontrado</p>
               </th>
            </tr>
         {% endfor %}
      </tbody>
   </table>
{% endblock %}