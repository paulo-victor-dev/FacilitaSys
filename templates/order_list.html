{% extends 'base.html' %}

{% block page_title %}
   Pedidos
{% endblock %}

{% block content_title %}
   Pedidos
{% endblock %}

{% block modal_title %}
   Adicionar pedido
{% endblock %}

{% block modal_body %}
   
{% endblock %}

{% block search %}
<div class="search_area">
   <form class="form_search" method="get">
      {% csrf_token %}

      <select class="filter_menu" name="filter">
         <option value="id" selected>ID</option>
         <option value="full_name">Cliente</option>
         <option value="creation_date">Data</option>
      </select>

      <div class="search_group">
         <input type="text" name="search" placeholder="Pesquisar...">
         
         <button type="submit">
            <span class="search_icon material-icons-sharp">search</span>
         </button>
      </div>
   </form>

   <div class="btn_area">
      <button class="add_btn">
         <span class="add_icon material-icons-sharp">add</span>
      </button>
      
      <a class="report_btn" href="{% url 'order:order_list_export' %}">
         <span class="report_icon material-icons-sharp">file_download</span>
      </a>
   </div>
</div>
{% endblock %}

{% block content_body %}
   <div class="table_area">
      <table>
         <thead>
            <tr>
               <th>ID</th>
               <th>CLIENTE</th>
               <th>QTD. ITENS</th>
               <th>TOTAL</th>
               <th>DATA</th>
               <th>STATUS</th>
               <th></th>
            </tr>
         </thead>
         <tbody>
            {% for order in orders %}
               <tr>
                  <th>{{ order.pk }}</th>
                  <th>{{ order.customer.get_full_name }}</th>
                  <th>{{ order.total_itens }}</th>
                  <th>R$ {{ order.total }}</th>
                  <th>{{ order.creation_date|date:"d/m/Y" }}</th>
                  <th>
                     {% if order.get_status_display == 'Finalizado' %}
                        <p class="status active">{{ order.get_status_display }}</p>

                     {% elif order.get_status_display == 'Cancelado' %}
                        <p class="status inactive">{{ order.get_status_display }}</p>

                     {% else %}
                        <p class="status pendent">{{ order.get_status_display }}</p>
                     {% endif %}
                  </th>
                  <th class="row_icon_area">
                     <button class="row_icon_btn" type="button">
                        <span class="material-icons-sharp">more_vert</span>
                     </button>
                  </th>
               </tr>
            {% empty %}
               <tr>
                  <th>
                     <p>Nenhum pedido encontrado</p>
                  </th>
               </tr>
            {% endfor %}
         </tbody>
      </table>
   </div>
{% endblock %}