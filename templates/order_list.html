{% extends 'base.html' %}

{% block page_title %}
   Pedidos
{% endblock %}

{% block content_title %}
   Pedidos
{% endblock %}

{% block search %}
   <div class="search_area">
      <form class="form_search" method="get">
         {% csrf_token %}

         <select class="filter_menu" name="filter">
            <option value="id" selected>ID</option>
            <option value="full_name">Cliente</option>
            <option value="creation_date">Data</option>
         </select>

         <div class="search_group">
            <input type="text" name="search" placeholder="Pesquisar..." value="{{ request.GET.search }}">
            
            <button type="submit">
               <span class="search_icon material-icons-sharp">search</span>
            </button>
         </div>
      </form>

      <div class="btn_area">         
         <a class="report_btn" href="{% url 'order:order_list_export' %}">
            <span class="report_icon material-icons-sharp">file_download</span>
         </a>
      </div>
   </div>
{% endblock %}

{% block content_body %}
   <table>
      <thead>
         <tr>
            <th>ID</th>
            <th>CLIENTE</th>
            <th>QTD. ITENS</th>
            <th>TOTAL</th>
            <th>DATA</th>
            <th>STATUS</th>
            <th></th>
         </tr>
      </thead>
      <tbody>
         {% for order in orders %}
            <tr>
               <th>{{ order.pk }}</th>
               <th>{{ order.customer.get_full_name }}</th>
               <th>{{ order.total_itens }}</th>
               <th>R$ {{ order.total }}</th>
               <th>{{ order.creation_date|date:"d/m/Y" }}</th>
               <th>
                  {% if order.get_status_display == 'Finalizado' %}
                     <p class="status active">{{ order.get_status_display }}</p>

                  {% elif order.get_status_display == 'Cancelado' %}
                     <p class="status inactive">{{ order.get_status_display }}</p>

                  {% else %}
                     <p class="status pendent">{{ order.get_status_display }}</p>
                  {% endif %}
               </th>
               <th class="th_icon_area">
                  <a class="th_icon_area_link" href="{% url 'order:order_detail' order.pk %}">
                     <span class="th_icon material-icons-sharp">edit</span>
                  </a>
               </th>
            </tr>
         {% empty %}
            <tr>
               <th>
                  <p>Nenhum pedido encontrado</p>
               </th>
            </tr>
         {% endfor %}
      </tbody>
   </table>
{% endblock %}